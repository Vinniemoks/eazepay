# ================================
# EAZEPAY SECURE CONFIGURATION
# ================================
# This file contains secure defaults for production deployment
# NEVER commit actual secrets to version control
# Use a secrets manager (AWS Secrets Manager, Azure Key Vault, HashiCorp Vault)

# ================================
# DEPLOYMENT
# ================================
NODE_ENV=production
DEPLOYMENT_MODE=distributed

# ================================
# SECRETS MANAGEMENT
# ================================
SECRETS_PROVIDER=aws  # Options: aws, azure, gcp, vault, env
AWS_REGION=us-east-1
AZURE_VAULT_URL=https://your-vault.vault.azure.net
GCP_PROJECT_ID=your-project-id
VAULT_URL=https://vault.example.com
VAULT_TOKEN=

# ================================
# JWT & AUTHENTICATION
# ================================
# Generate with: node -e "console.log(require('crypto').randomBytes(64).toString('base64'))"
JWT_SECRET=REPLACE_WITH_STRONG_64_CHAR_SECRET
JWT_EXPIRES_IN=8h
JWT_REFRESH_EXPIRES_IN=7d
JWT_ISSUER=eazepay-services
JWT_AUDIENCE=eazepay-services

# ================================
# INTERNAL SERVICE AUTHENTICATION
# ================================
# Generate with: node -e "console.log('ak_' + require('crypto').randomBytes(32).toString('base64').replace(/[+/=]/g, ''))"
INTERNAL_API_KEY=REPLACE_WITH_STRONG_API_KEY

# ================================
# DATABASE ENCRYPTION
# ================================
# PostgreSQL with SSL
DB_HOST=your-db-host.rds.amazonaws.com
DB_PORT=5432
DB_NAME=eazepay_prod
DB_USER=eazepay_app
DB_PASSWORD=REPLACE_WITH_STRONG_PASSWORD
DB_SSL=true
DB_SSL_CA=/path/to/rds-ca-cert.pem
DB_POOL_MIN=2
DB_POOL_MAX=10

# ================================
# REDIS WITH TLS
# ================================
REDIS_HOST=your-redis.cache.amazonaws.com
REDIS_PORT=6380
REDIS_PASSWORD=REPLACE_WITH_STRONG_PASSWORD
REDIS_TLS=true
REDIS_TLS_CA=/path/to/redis-ca-cert.pem

# ================================
# MONGODB WITH TLS
# ================================
MONGODB_URI=mongodb+srv://user:password@cluster.mongodb.net/eazepay?retryWrites=true&w=majority&tls=true
MONGODB_TLS_CA=/path/to/mongo-ca-cert.pem

# ================================
# TLS/SSL CERTIFICATES
# ================================
TLS_CERT_PATH=/etc/ssl/certs/eazepay.crt
TLS_KEY_PATH=/etc/ssl/private/eazepay.key
TLS_CA_PATH=/etc/ssl/certs/ca-bundle.crt
TLS_PASSPHRASE=
TLS_MIN_VERSION=TLSv1.3
ENABLE_MTLS=true

# ================================
# CORS CONFIGURATION
# ================================
ALLOWED_ORIGINS=https://app.eazepay.com,https://admin.eazepay.com,https://agent.eazepay.com
CORS_CREDENTIALS=true

# ================================
# RATE LIMITING
# ================================
RATE_LIMITING_ENABLED=true
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# ================================
# SECURITY HEADERS
# ================================
SECURITY_HEADERS_ENABLED=true
HSTS_ENABLED=true
HSTS_MAX_AGE=31536000
HSTS_INCLUDE_SUBDOMAINS=true
HSTS_PRELOAD=true

# ================================
# AUDIT LOGGING
# ================================
AUDIT_LOGGING_ENABLED=true
AUDIT_LOG_RETENTION_DAYS=90
AUDIT_LOG_TO_FILE=true
AUDIT_LOG_TO_REDIS=true

# ================================
# SECURITY MONITORING
# ================================
SECURITY_MONITORING_ENABLED=true
BRUTE_FORCE_THRESHOLD=5
BRUTE_FORCE_WINDOW=300
SUSPICIOUS_ACTIVITY_THRESHOLD=10
ENABLE_AUTO_BLOCK=true
SECURITY_ALERT_WEBHOOK=https://hooks.slack.com/services/YOUR/WEBHOOK/URL

# ================================
# ENCRYPTION AT REST
# ================================
ENCRYPTION_KEY=REPLACE_WITH_32_CHAR_KEY
ENCRYPTION_ALGORITHM=aes-256-gcm

# ================================
# EXTERNAL SERVICES (Use secrets manager)
# ================================
SMS_PROVIDER=twilio
SMS_API_KEY=
SMS_FROM_NUMBER=

EMAIL_PROVIDER=sendgrid
EMAIL_API_KEY=
EMAIL_FROM=noreply@eazepay.com

# ================================
# MONITORING & ALERTING
# ================================
SENTRY_DSN=
SENTRY_ENVIRONMENT=production
SENTRY_TRACES_SAMPLE_RATE=0.1

PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090

# ================================
# COMPLIANCE
# ================================
PCI_DSS_MODE=true
GDPR_MODE=true
DATA_RESIDENCY=EU
ENABLE_DATA_ENCRYPTION=true
ENABLE_AUDIT_TRAIL=true

# ================================
# BACKUP & DISASTER RECOVERY
# ================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_ENCRYPTION=true
BACKUP_LOCATION=s3://eazepay-backups/

# ================================
# NETWORK SECURITY
# ================================
ENABLE_WAF=true
ENABLE_DDOS_PROTECTION=true
IP_WHITELIST=
IP_BLACKLIST=

# ================================
# SERVICE MESH (Optional)
# ================================
SERVICE_MESH_ENABLED=false
ISTIO_ENABLED=false
LINKERD_ENABLED=false
