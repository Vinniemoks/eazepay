# AfriPay Universal - NGINX Default Configuration
# Additional server configurations

# Redirect www to non-www
server {
    listen 80;
    server_name www.api.afripay.local;
    return 301 http://api.afripay.local$request_uri;
}

# Status page for monitoring
server {
    listen 8080;
    server_name localhost;
    
    location /nginx_status {
        stub_status on;
        access_log off;
        allow 127.0.0.1;
        allow 10.0.0.0/8;
        allow 172.16.0.0/12;
        allow 192.168.0.0/16;
        deny all;
    }
    
    location /health {
        access_log off;
        return 200 "nginx is healthy\n";
        add_header Content-Type text/plain;
    }
}